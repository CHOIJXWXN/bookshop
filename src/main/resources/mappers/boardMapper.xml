<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bookshop.mappers.board">

<!-- 도서정보 불러오기 -->
<select id="getBookInfo" resultType="Book">
	SELECT *
	FROM BOOK
	WHERE book_id = #{book_id}
</select>

<!-- 문의 내용 저장(문의글 쓰기 )-->
<insert id="writeAsk" >
	insert into ASK(writer, book_id, ask_contents, ask_date, ask_sort) 
	values(#{writer}, #{book_id}, #{ask_contents}, now(), #{ask_sort})
</insert>

<!-- 문의 글 list -->
<select id="getAskList" resultType="AskList">
	SELECT ask_id, book_title, ask_sort, ask_date, book_cover
	FROM ASK a, BOOK b
	WHERE a.book_id = b.book_id
	AND a.writer = #{writer}
	LIMIT 5
</select>

<!-- 문의글 불러오기 -->
<select id="getAsk" resultType="Ask">
	SELECT *
	FROM ASK
	WHERE ask_id = #{ask_id}
	AND available = 0;
</select>


</mapper>